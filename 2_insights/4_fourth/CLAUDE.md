# Fourth(4번째 번호) 인사이트 - 뜻밖의 수

정렬된 당첨번호 중 4번째 번호(ball4/ord4) - **뜻밖의 수 중심** 선택

## 실행

```bash
python export_result.py
```

- **입력**: result/result.csv (ord1, ord2, ord3, ord6 있음)
- **출력**: result/result.csv (ord4 추가, 복수 추천시 행 복제)

## "뜻밖의 수" 전략

기존 방식(빈도 상위 선호)과 달리, **빈도 하위 번호에 기회 부여**

### 핵심 아이디어
- 매 회차 평균 2.89개는 Rest21(빈도 하위)에서 출현
- ord4 포지션은 예측이 어려운 위치 → 역발상 적용
- 콜드 비트, 저빈도 번호에 가중치

## ord4 선택 로직

### 범위 제약
- `ord3 + 1 ≤ ord4 ≤ ord6 - 1` (ord5 자리 확보)

### 점수화 요소 (역발상 적용)

| 요소 | 점수 | 설명 |
|------|------|------|
| 빈도 순위 역가산 | ×3 | rank ≥ 20이면 (rank-19)×3 |
| 뜻밖의 수 그룹 | +15 | 빈도 하위 15개 번호 |
| 최빈 구간 20-29 | +8 | 42.7% |
| 최빈 구간 30-39 | +6 | 34.8% |
| ball3-ball4 간격 | ÷4 | 간격별 통계 |
| 연속수 (gap=1) | +5 | 12.1% |
| 원핫 ord4 비트 역가산 | +0~15 | 빈도 낮을수록 보너스 |
| **콜드 비트** | **+12** | 역발상: 콜드 선호 |
| 핫 비트 | -3 | 역발상: 핫 약간 감점 |
| 소수 | +5 | 25.6% |

### 뜻밖의 수 그룹 (빈도 rank 20~34)
```
{14, 37, 15, 36, 13, 34, 17, 40, 39, 41, 11, 12, 43, 42, 8}
```

## 원핫인코딩 데이터

### ord4 포지션 비트 빈도 상위
| 비트 | 빈도 | 순위 |
|------|------|------|
| 27 | 23회 | 1위 |
| 28 | 22회 | 2위 |
| 25 | 20회 | 3위 |
| 24, 29 | 19회 | 공동 4위 |

### 콜드 비트 (뜻밖의 수에서 선호)
```
{41, 43, 8, 14, 34, 26, 22, 44, 20, 7, 30, 15, 11, 40, 6}
```

## 주요 통계 (내장)

### ball4 빈도 상위 vs 하위
| 상위 (회피) | 하위 (선호) |
|------------|------------|
| 30 (26회) | 8, 42, 43 (1회) |
| 26 (19회) | 12 (2회) |
| 29, 35, 27, 23 (18회) | 11 (3회) |

### 구간 분포
- **20-29**: 42.7% (최빈)
- **30-39**: 34.8%
- **10-19**: 15.8%
- **40-45**: 5.5%
- **01-09**: 1.2%

### ball3-ball4 간격
| 간격 | 빈도 | 비율 |
|------|------|------|
| 2 | 54회 | 14.2% (최빈) |
| 1 | 46회 | 12.1% (연속수) |
| 3 | 44회 | 11.6% |

## Range 반영 (80/20 전략 + 뜻밖의 수)

### 점수화 요소 추가
| 요소 | 점수 | 설명 |
|------|------|------|
| 80% 잘 나오는 구간 (2,3) | ×0.2 | 최대 8점 (낮게) |
| 20% 나올 가능성 구간 (1,4) | ×0.4 | 최대 7점 (뜻밖) |
| 새 구간 추가 (4개 목표) | +8 | 51.2% 최빈 |
| 구간 점프 (≥2) | +3 | 뜻밖의 수 전략 |
| 연속/인접 구간 | +2 | 기본 |

### 4개 구간 사용이 최적
- 3개 구간 → 4개: +8점
- 4개 유지: +5점
- 5개: +3점
