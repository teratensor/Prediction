# 6_finetune

6개 일치 조합만 찾기 위한 필터링 최적화

## 목표

55만개 조합 → 6개 일치 조합만 남기고 필터링하여 조합 수 축소

## 6개 일치 조합의 차별화 특성

| 특성 | 6개 일치 | 5개 일치 | 차이 |
|------|----------|----------|------|
| 소수 개수 | 평균 2.78개 | 평균 1.92개 | **+45%** |
| 홀수 개수 | 평균 3.78개 | 평균 2.98개 | **+27%** |
| 합계 | 평균 121 | 평균 134 | **-10%** |

## 권장 필터링 조건

### 옵션 A: 안전성 중시 (권장)

```python
prime_count >= 2
```

- 6개 일치: **89% 유지** (8/9)
- 조합 수: **39% 감소**
- 손실: 926회차만 (소수 1개인 이상치)

### 옵션 B: 효율성 중심

```python
prime_count >= 2 AND (odd_count >= 3 OR sum < 130)
```

- 6개 일치: **89% 유지** (8/9)
- 조합 수: **44% 감소**

## 6개 일치 회차 (백테스트 900~1000)

| 회차 | 당첨번호 | 소수 | 홀수 | 합계 |
|------|----------|------|------|------|
| 923 | [3, 17, 18, 23, 36, 41] | 3개 | 4개 | 138 |
| 926 | [10, 16, 18, 20, 25, 31] | 1개 | 2개 | 120 |
| 929 | [7, 9, 12, 15, 19, 23] | 4개 | 4개 | 85 |
| 936 | [7, 11, 13, 17, 18, 29] | 5개 | 5개 | 95 |
| 962 | [1, 18, 28, 31, 34, 43] | 2개 | 3개 | 155 |
| 971 | [2, 6, 17, 18, 21, 26] | 2개 | 2개 | 90 |
| 972 | [3, 6, 17, 23, 37, 39] | 4개 | 5개 | 125 |
| 979 | [7, 11, 16, 21, 27, 33] | 2개 | 4개 | 115 |
| 985 | [17, 21, 23, 30, 34, 44] | 2개 | 3개 | 169 |

## 소수 목록 (1~45)

```python
PRIMES = {2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43}
```

## 필터 함수 예시

```python
def filter_combination(combo):
    """6개 일치 가능성 높은 조합만 필터링"""
    numbers = [combo['ord1'], combo['ord2'], combo['ord3'],
               combo['ord4'], combo['ord5'], combo['ord6']]

    # 소수 개수
    prime_count = sum(1 for n in numbers if n in PRIMES)

    # 홀수 개수
    odd_count = sum(1 for n in numbers if n % 2 == 1)

    # 합계
    total_sum = sum(numbers)

    # 옵션 A: 안전성 중시
    return prime_count >= 2

    # 옵션 B: 효율성 중심
    # return prime_count >= 2 and (odd_count >= 3 or total_sum < 130)
```
